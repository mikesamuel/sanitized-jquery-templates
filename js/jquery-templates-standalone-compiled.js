(function(){var l={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&#34;","'":"&#39;"},m=/["&'<>]/g;function r(d){return l[d]}escapeHtml=function(d){return d!==void 0?(""+d).replace(m,r):""};var s=/(?:[^${]|\{(?!\{\/?[=a-z])|\$(?!\{))+|\$\{[^}]*\}|\{\{(?:(?:=|[a-z][a-z0-9]*)[\s\S]*?|\/(?:=|[a-z][a-z0-9]*))\}\}/gi,t=/^\s*(?:\(\s*([$_a-z]\w*)\s*(?:,\s*([$_a-z]\w*)\s*)?\)\s*)?(\S(?:[\S\s]*\S)?)\s*$/i,u=/^\s*(?:\(([\S\s]*)\)\s*)?([^\s()](?:[^()]*[^\s()])?)\s*$/,v={"if":1,wrap:1}
function w(d){var b={};d.replace(s,function(c){(c=c.match(/^\{\{\/(=|[a-z][^\W_]*)[\S\s]*}}$/i))&&(b[c[1]]=1)});return b}function x(d,b){var c=["",""],e=[c],a=c;$.each(d.match(s)||[],function(c,d){var j=d.match(/^\{\{(\/?)(=|[a-z][^\W_]*)([\S\s]*)}}$/i);if(j)if(j[1])a=e[--e.length-1];else{var n=[j[2],j[3]];a.push(n);b[j[2]]===1&&e.push(a=n)}else d.substring(0,2)==="${"?a.push(["=",d.substring(2,d.length-1)]):a.push(d)});return c}
function y(d){var b=["var $$tmplVar0;$data=$.extend(Object.create?Object.create(null):{},$data||{});$item=$item||{};with($data){return("],c,e=0;$.each(d.slice(2),function k(d,a){c&&b.push("+");var i;if(typeof a==="string")b.push(JSON.stringify(a).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"));else{var h=a[0],g=a[1];i=a.length;var f="$$tmplVar"+e;if(h==="="){c||b.push("''+");var o="",p="",g=g.replace(/(=>\w+)+$/,function(a){a=a.split("=>");p=Array(a.length).join(")");o=a.reverse().join("(")
return""});b.push("(",f,"=(",g,"),",o,"'function'!==typeof ",f,"?",f,":",f,".call(null,arguments))",p)}else if(h==="if"){c=1;for(f=2;;f=h+1){h=i;for(g=f;g<h;++g)a[g][0]==="else"&&(h=g);var g=f<i?(f===2?a:a[f-1])[1]:"",q=/\S/.test(g);b.push(c?"":"''",f===2?"((":"):(",g,q?")?(":"");c=0;$.each(a.slice(f,h),k);if(!q)break}b.push(c?"))":"''))")}else h==="each"?(i=g.match(t),h=i[1]||"$index",g=i[2]||"$value",i=i[3],++e,b.push("(",f,"=[],$.each((",i,"),function(",h,",",g,"){var ","$$tmplVar",e,";",f,".push("),
c=0,$.each(a.slice(2),k),c||b.push("''"),b.push(")}),",f,".join(''))"),--e):h==="tmpl"&&(i=g.match(u),h=i[1],b.push("(",f,"=",h?"$.extend([],arguments,["+h+"])":"arguments",",$.template((",i[2],")).tmpl(",f,"[0],",f,"[1]))"))}c=1});c||b.push("''");b.push(")}");return Function("$data","$item",b.join(""))}$.templatePlugins=[function(d){$.each(d,function c(d,a){typeof a!=="string"&&(a[0]==="="?a[1]+="=>escapeHtml":a[0]==="html"?a[0]="=":$.each(a,c))});return d}]
function z(d){return(d=$.templates[d])&&"function"!==typeof d.tmpl}function A(d,b){function c(a){return function(d){var b;for(b=0;b<a;++b)d=$.templatePlugins[b](d,c(b));return d}}var e={};$.each(d,function k(a,b){e[a]!==1&&(e[a]=1,$.each(b,function(a,b){if(b[0]==="tmpl"||b[0]==="wrap"){var c=b[1].match(u);c&&(c=c[2],z(c)&&e[c]!==1&&k(c,d[c]=$.templates[c]))}}))});var a;$.each(c($.templatePlugins.length)(d),function(c,d){var e={tmpl:y(d)};c!==b?$.templates[c]=e:a=e});return a}$.templates={};
$.template=function B(b,c){var e=$.templates,a;if(arguments.length===1){if(b.indexOf("<")+1)return B(null,b);z(b)&&(a={},a[b]=e[b],A(a));return e[b]}a=x(c,$.extend(w(c),v));if(b===null)return A({_:a},"_");e[b]=a}})()
