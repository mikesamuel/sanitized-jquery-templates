(function(){var j={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&#34;","'":"&#39;"},k=/[^"&'<>]/g;function n(d){return j[d]}escapeHtml=function(d){return d!==void 0?(""+d).replace(k,n):""};var o=1,p=0,u=RegExp("(?:[^${]|\\{(?!\\{/?[=a-z])|\\$(?!\\{))+|\\$\\{[^}]*\\}|\\{\\{(?:(?:=|[a-z][a-z0-9]*)[\\s\\S]*?|/(?:=|[a-z][a-z0-9]*))\\}\\}","gi"),v=/^\s*(?:\(\s*([$_a-z]\w*)\s*(?:,\s*([$_a-z]\w*)\s*)?\)\s*)?(\S(?:[\S\s]*\S)?)\s*$/i,w=/^\s*(?:\(([\S\s]*)\)\s*)?([^\s()](?:[^()]*[^\s()])?)\s*$/,x="$index",y="$value",z="templates",A="tmpl",B={"if":o,wrap:o};function C(d){var b={};d.replace(u,function(c){(c=c.match(/^{{\/(=|[a-z][^\W_]*)[\S\s]*}}$/i))&&(b[c[1]]=o)});return b}function D(d,b){var c=["",""],e=[c],a=c;$.each(d.match(u)||[],function(c,d){var l=d.match(/^{{(\/?)(=|[a-z][^\W_]*)([\S\s]*)}}$/i);if(l)if(l[1])a=e[--e.length-1];else{var q=[l[2],l[3]];a.push(q);b[l[2]]===o&&e.push(a=q)}else d.substring(0,2)==="${"?a.push(["=",d.substring(2,d.length-1)]):a.push(d)});return c};function E(d){var b=["var $$tmplVar0;$data=$.extend(Object.create?Object.create(null):{},$data||{});$item=$item||{};with($data){return("],c,e=0;$.each(d.slice(2),function m(d,a){c&&b.push("+");var i;if(typeof a==="string")b.push(JSON.stringify(a).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"));else{var h=a[0],g=a[1];i=a.length;var f="$$tmplVar"+e;if(h==="="){c||b.push("''+");var r="",s="",g=g.replace(/(=>\w+)+$/,function(a){a=a.split("=>");s=Array(a.length).join(")");r=a.reverse().join("(");
return""});b.push("(",f,"=(",g,"),",r,"'function'!==typeof ",f,"?",f,":",f,".call(null,arguments))",s)}else if(h==="if"){c=o;for(f=2;;f=h+1){h=i;for(g=f;g<h;++g)a[g][0]==="else"&&(h=g);var g=f<i?(f===2?a:a[f-1])[1]:"",t=/\S/.test(g);b.push(c?"":"''",f===2?"((":"):(",g,t?")?(":"");c=p;$.each(a.slice(f,h),m);if(!t)break}b.push(c?"))":"''))")}else h==="each"?(i=g.match(v),h=i[1]||x,g=i[2]||y,i=i[3],++e,b.push("(",f,"=[],$.each((",i,"),function(",h,",",g,"){var ","$$tmplVar",e,";",f,".push("),c=p,$.each(a.slice(2),
m),c||b.push("''"),b.push(")}),",f,".join(''))"),--e):h==="tmpl"&&(i=g.match(w),h=i[1],b.push("(",f,"=",h?"$.extend([],arguments,["+h+"])":"arguments",",$.template((",i[2],")).tmpl(",f,"[0],",f,"[1]))"))}c=o});c||b.push("''");b.push(")}");try{return Function("$data","$item",b.join(""))}catch(a){throw a}};$.templatePlugins=[function(d){$.each(d,function c(d,a){typeof a!=="string"&&(a[0]==="="?a[1]+="=>escapeHtml":a[0]==="html"?a[0]="=":$.each(a,c))});return d}];function F(d){return(d=$[z][d])&&"function"!==typeof d[A]}
function G(d,b){function c(a){return function(d){var b;for(b=0;b<a;++b)d=$.templatePlugins[b](d,c(b));return d}}var e={};$.each(d,function m(a,b){e[a]!==o&&(e[a]=o,$.each(b,function(a,b){if(b[0]==="tmpl"||b[0]==="wrap"){var c=b[1].match(w);c&&(c=c[2],F(c)&&e[c]!==o&&m(c,d[c]=$[z][c]))}}))});var a;$.each(c($.templatePlugins.length)(d),function(c,d){var e={tmpl:E(d)};c!==b?$[z][c]=e:a=e});return a}$[z]={};
$.template=function H(b,c){var e=$[z],a;if(arguments.length===1){if(b.indexOf("<")+1)return H(null,b);F(b)&&(a={},a[b]=e[b],G(a));return e[b]}a=D(c,$.extend(C(c),B));if(b===null)return G({_:a},"_");e[b]=a}}())
