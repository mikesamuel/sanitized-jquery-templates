(function(){var k=1,m=0,o="(?:[^${]|\\{(?!\\{/?[=a-z])|\\$(?!\\{))+",p="\\$\\{[^}]*\\}",q="(?:=|[a-z][a-z0-9]*)",r="\\{\\{(?:"+q+"[\\s\\S]*?|/"+q+")\\}\\}",s=RegExp(o+"|"+p+"|"+r,"gi"),w="[a-z_$]\\w*",x=RegExp("^\\s*(?:\\(\\s*("+w+")\\s*(?:,\\s*("+w+")\\s*)?\\)\\s*)?(\\S(?:[\\s\\S]*\\S)?)\\s*$","i"),y=/^\s*(?:\(([\s\S]*)\)\s*)?([^\s()](?:[^()]*[^\s()])?)\s*$/,z="$index",A="$value",B="templates",C="template",D="tmpl",E={"if":k,wrap:k};function F(d){var f={};d.replace(s,function(a){(a=a.match(/^\{\{\/(=|[a-z][a-z0-9]*)[\s\S]*\}\}$/i))&&(f[a[1]]=k)});return f}function G(d,f){var a=["",""],c=[a],b=a;$.each(d.match(s)||[],function(a,d){var l=d.match(/^\{\{(\/?)(=|[a-z][a-z0-9]*)([\s\S]*)\}\}$/i);if(l)if(l[1])b=c[--c.length-1];else{var t=[l[2],l[3]];b.push(t);f[l[2]]===k&&c.push(b=t)}else d.substring(0,2)==="${"?b.push(["=",d.substring(2,d.length-1)]):b.push(d)});return a};function H(d){var f="$$tmplVar",a=["var "+f+"0;$data=$.extend(Object.create?Object.create(null):{},$data||{});$item=$item||{};with($data){return("],c,b=0;$.each(d.slice(2),function l(d,j){c&&a.push("+");var i;if(typeof j==="string")a.push(JSON.stringify(j).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"));else{var e=j[0],h=j[1];i=j.length;var g=f+b;if(e==="="){c||a.push("''+");var n="",u="",h=h.replace(/(=>\w+)+$/,function(a){a=a.split("=>");u=Array(a.length).join(")");n=a.reverse().join("(");
return""});a.push("(",g,"=(",h,"),",n,"'function'!==typeof ",g,"?",g,":",g,".call(null,arguments))",u)}else if(e==="if"){c=k;for(g=2;;g=e+1){e=i;for(h=g;h<e;++h)j[h][0]==="else"&&(e=h);var h=g<i?(g===2?j:j[g-1])[1]:"",v=/\S/.test(h);a.push(c?"":"''",g===2?"((":"):(",h,v?")?(":"");c=m;$.each(j.slice(g,e),l);if(!v)break}a.push(c?"))":"''))")}else e==="each"?(i=h.match(x),e=i[1]||z,h=i[2]||A,i=i[3],++b,a.push("(",g,"=[],$.each((",i,"),function(",e,",",h,"){var ",f,b,";",g,".push("),c=m,$.each(j.slice(2),
l),c||a.push("''"),a.push(")}),",g,".join(''))"),--b):e==="tmpl"&&(i=h.match(y),e=i[1],a.push("(",g,"=",e?"$.extend([],arguments,["+e+"])":"arguments",",$.template((",i[2],")).tmpl(",g,"[0],",g,"[1]))"))}c=k});c||a.push("''");a.push(")}");try{return Function("$data","$item",a.join(""))}catch(n){throw n;}};$.templatePlugins=[function(d){$.each(d,function a(d,b){typeof b!=="string"&&(b[0]==="="?b[1]+="=>escapeHtml":b[0]==="html"?b[0]="=":$.each(b,a))});return d}];function I(d){return(d=$[B][d])&&"function"!==typeof d[D]}
function K(d,f){function a(b){return function(d){var c;for(c=0;c<b;++c)d=$.templatePlugins[c](d,a(c));return d}}var c={};$.each(d,function J(a,b){c[a]!==k&&(c[a]=k,$.each(b,function(a,b){if(b[0]==="tmpl"||b[0]==="wrap"){var e=b[1].match(y);e&&(e=e[2],I(e)&&c[e]!==k&&J(e,d[e]=$[B][e]))}}))});var b;$.each(a($.templatePlugins.length)(d),function(a,d){var c={tmpl:H(d)};a!==f?$[B][a]=c:b=c});return b}$[B]={};
$[C]=function L(f,a){var c=$[B],b;if(arguments.length===1){if(f.indexOf("<")+1)return L(null,f);I(f)&&(b={},b[f]=c[f],K(b));return c[f]}b=G(a,$.extend(F(a),E));if(f===null)return K({_:b},"_");c[f]=b};}())
