(function(){var r={2048:'"',4096:"'",6144:""},y=[1,1,1,1,1,1,,,,1,,1],C=[0,1,4,4,5,5,,1,2,10,,9,9,12,12,12,7,,,6,6,8,2],D={"break":1,"case":1,"continue":1,"delete":1,"do":1,"else":1,"finally":1,"instanceof":1,"return":1,"throw":1,"try":1,"typeof":1}
function E(a){var b=a.length,c=a.charAt(b-1);switch(c){case "+":case "-":for(var d=b-1;d>0&&a.charAt(d-1)===c;)--d;a=b-d;return(a&1)===1;case ".":if(b===1)return 1;a=a.charAt(b-2);return!("0"<=a&&a<="9");case "/":return b===1;default:if(/[#%&(*,:-?\[^{-~]/.test(c))return 1;return(a=a.match(/[\w$]+$/))&&D[a[0]]===1}}
function F(a,b){if(a===b)return a;if(a===(b&-24577|a&24576))return a&-24577|24576;var c=a&229376;if(a===(b&-229377|c)){var d=b&229376;return a&-229377|(c!==131072&&d!==131072&&c!==196608&&d!==196608?163840:196608)}c=a&31;d=b&31;if(c>d)var l=a,a=b,b=l,l=c,c=d,d=l;if(c==3&&d==4)return b;if(c===4&&(a&224)===(b&224)&&(d===5||(b&6144)===6144))return a;return 23}function G(a){var b=a&31;b===6&&(a=H(a&224,a&1792,6144));return a}
function H(a,b,c){var d,l=0,p=0;switch(b){case 1024:d=8;break;case 256:d=16;l=8192;break;case 512:d=9;break;case 768:d=22;p=32768;break;default:throw Error(b)}return d|a|b|c|l|p}
var da=function(){function a(a){if(a.indexOf("&")<0)return a;return a.replace(/&(?:#(?:(x[0-9a-f]+)|([0-9]+))|(lt|gt|amp|quot|apos));/gi,function(a,J,b,f){if(J||b)return String.fromCharCode(0+(J||b));return e[f.toLowerCase()]})}function b(a){this.a=a}function c(a,f,e){var c=a.prototype=new b(/(?!)/);c.constructor=a;c.h=f;if(e)c.k=e}function d(a,b){this.a=a;this.r=b}function l(a,b){this.a=a;this.s=b}function p(a){this.a=a}function t(a){this.a=a}function i(a){this.a=a}function v(a,b){this.a=a;this.q=
b}function k(a,b){this.a=a;this.i=b}function j(a,b){this.a=a;this.i=b}function z(a){this.a=a}function m(a){this.a=a}function n(a){this.a=a}function w(a){this.a=a}function A(a){this.a=a}function B(a){this.a=a}function u(a){this.a=a}function x(){this.b=this.c=0}function f(b,f){for(;b;){var e;var c=b,d=f&6144;e=c.length;d===0?e=-1:d===6144?e=(c=c.match(/[\s>]/))?c.index:e:(c=c.indexOf(r[d]),e=c>=0?c:e);if(e===-1)e=new x,e.l(b,f),b=b.substring(e.c),f=e.b;else{for(var c=b.length,c=e<c?e+r[f&6144].length:
-1,d=a(b.substring(0,e)),g=new x;d.length!==0;)g.l(d,f),d=d.substring(g.c),f=g.b;if(c!==-1)b=b.substring(c),f=4|f&224;else{if(e!==b.length)throw Error();b=""}}}return f}var e={w:"<",v:">",t:"&",x:'"',u:"'"};b.prototype.k=function(){return 1};b.prototype.h=function(){throw Error()};c(d,function(){return this.r});c(l,function(){return 4|this.s});var aa={32:8208,64:9,224:0,160:1,96:1,128:1,192:1};c(p,function(a){a&=224;var b=aa[a];if(typeof b!=="number")throw Error(a);return b===1?b|a:b});c(t,function(a){return 4|
a&224});var ba={action:1,archive:1,background:1,cite:1,classid:1,codebase:1,data:1,dsync:1,href:1,longdesc:1,src:1,usemap:1};c(i,function(a,b){var e=b[1].toLowerCase(),e="on"===e.substring(0,2)?256:"style"===e?512:ba[e]===1?768:1024;return 5|a&224|e});c(v,function(a){return H(a&224,a&1792,this.q)});c(k,function(a){return a&-229408|this.i});c(j,function(a){return a&8160|this.i});c(z,function(a,b){switch(a&24576){case 16384:return a&-24608|8208;case 8192:return a&-24608|21;default:throw Error("Ambiguous / could be a RegExp or division.  Please add parentheses before `"+
b[0]+"`")}});c(m,function(a,b){return a&-24577|(E(b[0])?8192:16384)});c(n,function(a){return a});var o=new n(/$/),s=new b(/[?#]|$/);s.h=function(a,b){var e=a&229376;e===32768&&(e=65536);if(e!==131072){var f=b[0];"?"===f&&e!==196608?e=98304:"#"===f&&(e=131072)}return a&-229377|e};c(w,function(){return 228},function(a){return(a&1792)===0});var q=new w(/<\/script\b/i),h=new w(/<\/style\b/i),ca={96:"textarea",128:"title",160:"listing",192:"xmp"};c(A,function(){return 228},function(a,b){return b[1].toLowerCase()===
ca[a&224]});c(B,function(a,b){var e=b[1],e='"'===e?14:"'"===e?15:13;return a&-229408|e|32768});c(u,function(a){return a&-24608|16400});var g=[];g[0]=[new n(/^[^<]+/),new d(/<\!--/,7),new l(/<script(?=[\s>\/]|$)/i,32),new l(/<style(?=[\s>\/]|$)/i,64),new l(/<textarea(?=[\s>\/]|$)/i,96),new l(/<title(?=[\s>\/]|$)/i,128),new l(/<xmp(?=[\s>\/]|$)/i,192),new d(/<\/?/,2)];g[2]=[new d(/^[a-z]+/i,3),new d(/^(?=[^a-z])/i,0)];g[3]=[new n(/^[a-z0-9:-]*(?:[a-z0-9]|$)/i),new l(/^(?=[\/\s>])/,224)];g[4]=[new i(/^\s*([a-z][\w-]*)/i),
new p(/^\s*\/?>/),new n(/^\s+$/)];g[5]=[new k(/^\s*=/,6),new t(/^/)];g[6]=[new v(/^\s*"/,2048),new v(/^\s*'/,4096),new v(/^(?=[^"'\s>])/,6144),new t(/^(?=>|\s+[\w-]+\s*=)/),new n(/^\s+/)];g[7]=[new d(/--\>/,0),o];g[8]=[o];g[9]=[new k(/\/\*/,10),new k(/"/,11),new k(/'/,12),new B(/\burl\s*\(\s*(["']?)/i),h,o];g[10]=[new k(/\*\//,9),h,o];g[11]=[new k(/"/,9),new n(/\\(?:\r\n?|[\n\f"])/),new d(/[\n\r\f]/,23),h,o];g[12]=[new k(/'/,9),new n(/\\(?:\r\n?|[\n\f'])/),new d(/[\n\r\f]/,23),h,o];g[13]=[new k(/[\\)\s]/,
9),s,new k(/["']/,23),h];g[15]=[new k(/'/,9),s,new n(/\\(?:\r\n?|[\n\f'])/),new d(/[\n\r\f]/,23),h];g[14]=[new k(/"/,9),s,new n(/\\(?:\r\n?|[\n\f"])/),new d(/[\n\r\f]/,23),h];g[16]=[new k(/\/\*/,18),new k(/\/\//,17),new j(/"/,19),new j(/'/,20),new z(/\//),new m(/(?:[^<\/"'\s\\]|<(?!\/script))+/i),new n(/\s+/),q];g[18]=[new k(/\*\//,16),q,o];g[17]=[new k(/[\r\n\u2028\u2029]/,16),q,o];g[19]=[new u(/"/),q,new n(/^(?:[^"\\\r\n\u2028\u2029<]|\\(?:\r\n?|[^\r<]|<(?!\/script))|<(?!\/script))+/i)];g[20]=[new u(/'/),
q,new n(/^(?:[^'\\\r\n\u2028\u2029<]|\\(?:\r\n?|[^\r<]|<(?!\/script))|<(?!\/script))+/i)];g[21]=[new u(/\//),q,new n(/^(?:[^\[\\/<\r\n\u2028\u2029]|\\[^\r\n\u2028\u2029]|\\?<(?!\/script)|\[(?:[^\]\\<\r\n\u2028\u2029]|\\(?:[^\r\n\u2028\u2029]))*|\\?<(?!\/script)\])+/i)];g[22]=[s];g[1]=[new A(/<\/(\w+)\b/),o];x.prototype.l=function(a,b){if((b&31)===23)this.c=a.length,this.b=b;else{var e=2147483647,f=-1,c,d,s=g[b&31],q,o,h,l,k,j=s.length;for(k=0;k<j;++k)if(q=s[k],o=a.match(q.a))h=o.index,h<e&&(l=h+o[0].length,
q.k(b,o)&&(e=h,f=l,c=q,d=o));c?(this.b=c.h(b,d),this.c=f):(this.b=23,this.c=a.length);if(this.c===0&&(this.b&31)===(b&31))throw Error(b)}};return f}();function I(){}I.prototype.toString=function(){return this.e};function K(){function a(a){this.e=a}var b=a.prototype=new I;b.constructor=a;b.d=0;return a}var ea=K(0),fa=K(1),ga=K(2);SanitizedHtml=ea;SanitizedJsStrChars=fa;SanitizedUri=ga
function L(a){return a&&a.d===0?a:a instanceof Array?a.map(L).join(""):String(a).replace(M,N)}function ha(a){if(a&&a.d===0)return String(a.e).replace(O,N);return String(a).replace(M,N)}function ia(a){if(a&&a.d===0)return a=String(a.e).replace(P,""),a=String(a).replace(O,N);return String(a).replace(M,N)}function ja(a){if(a&&a.d===0)return a=String(a.e).replace(P,""),a=String(a).replace(ka,N);return String(a).replace(la,N)}
function ma(a){a=String(a);a=na.test(a)?a:"zSafehtmlz";var b,c=a.indexOf("=");return c>=0&&(b=a.charAt(a.length-1))!='"'&&b!="'"?a.substring(0,c+1)+'"'+a.substring(c+1)+'"':a}function oa(a){a=String(a);a=pa.test(a)?a:"zSafehtmlz";return a}function Q(a){if(a&&a.d===1)return a.e;return String(a).replace(qa,R)}function ra(a){var b;return a==null?" null ":(b=typeof a)=="boolean"||b=="number"?" "+a+" ":"'"+Q(a)+"'"}function sa(a){return String(a).replace(ta,R)}var S=/['()]/g
function T(a){return"%"+a.charCodeAt(0).toString(16)}function ua(a){if(a&&a.d===2)return U(a);a=encodeURIComponent(a);return a.replace(S,T)}function U(a){a=String(a);if(/[\0- "<>\\{}\x7f\x85\xa0\u2028\u2029\uff00-\uffff]|%(?![a-f0-9]{2})/i.test(a)){for(var a=a.split(/(%[a-f0-9]{2}|[#$&+,/:;=?@\[\]])/i),b=a.length-1;b>=0;b-=2)a[b]=encodeURIComponent(a[b]);a=a.join("")}return a.replace(S,T)}function va(a){var b=String(a);return wa.test(b)?U(a):"#zSafehtmlz"}
function xa(a){return String(a).replace(ya,za)}function Aa(a){if(a==null)return"";a=String(a);a=Ba.test(a)?a:"zSafehtmlz";return a}var V={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};function N(a){return V[a]||(V[a]="&#"+a.charCodeAt(0)+";")}var W={"\x08":"\\b","\t":"\\t","\n":"\\n","\x0c":"\\f","\r":"\\r","/":"\\/","\\":"\\\\"};function R(a){var b;if(!(b=W[a])){b=a.charCodeAt(0).toString(16);var c=b.length<=2?"\\x00":"\\x00";b=c.substring(0,c.length-b.length)+b;b=W[a]=b}return b}var X={}
function za(a){return X[a]||(X[a]="\\"+a.charCodeAt(0).toString(16)+" ")}
var M=/[\x00\x22\x26\x27\x3c\x3e]/g,O=/[\x00\x22\x27\x3c\x3e]/g,la=/[\x00\x09-\x0d \x22\x26\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g,ka=/[\x00\x09-\x0d \x22\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g,qa=/[\x00\x08-\x0d\x22\x26\x27\/\x3c-\x3e\\\x85\u2028\u2029]/g,ta=/[\x00\x08-\x0d\x22\x24\x26-\/\x3a\x3c-\x3f\x5b-\x5e\x7b-\x7d\x85\u2028\u2029]/g,ya=/[\x00\x08-\x0d\x22\x26-\x2a\/\x3a-\x3e@\\\x7b\x7d\x85\xa0\u2028\u2029]/g,Ba=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9][_a-z0-9-]*)(?:-[_a-z][_a-z0-9-]*)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9])(?:[a-z]{1,2}|%)?|!important|)$/i,
wa=/^(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,na=/^(?!style|on|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|src|usemap)(?:[a-z0-9_$:-]*|dir=(?:ltr|rtl))$/i,pa=/^(?!script|style|title|textarea|xmp|no)[a-z0-9_$:-]*$/i,P=/<(?:!|\/?[a-z])(?:[^>'"]|"[^"]*"|'[^']*')*>/gi;function Ca(a){return a}var Y=[L,ha,ia,ja,oa,ma,Q,ra,sa,xa,Aa,ua,U,va];Y[14]=Ca
function Z(a,b){var c={};a.replace(/\{\{\/([a-z]\w*)\}/gi,function(a,b){c[b]=1});var d=["T",b?String(b):""],l=[d],p=d,t=String(a).match(/\$\{[^}]*\}|\{\{\/?[a-z][a-z0-9]*\b(?:\}?[^}])*\}\}|[\s\S][^{$]*/gi);if(t)for(var i,v=0,k=t.length;v<k;++v){var j=t[v];switch(j.substring(0,2)){case "${":i=j.match(/^\$\{([\s\S]+)\}$/);if(!i)break;p.push(["$",i[1]]);continue;case "{{":i=j.match(/^\{\{(\/?)([a-z][a-z0-9]*)((?:\}?[^}])*)\}\}$/i);if(!i)break;var j=i[2],z=i[3];i[1]?l.length>1&&p[0]===j&&(p=l[--l.length-
1]):(i=[j,z],p.push(i),1===c[j]&&l.push(p=i));continue}i=p.length;i>2&&"string"===typeof p[i-1]?p[i-1]+=j:p[i]=j}return d}function Da(a){function b(a){for(var b=2,d=a.length;b<d;++b)c(a[b])}function c(a){if(typeof a==="string")d.push(a);else{var c=a[0],t=a[1];c==="$"?d.push("${",t,"}"):(d.push("{{",c,t,"}}"),b(a),d.push("{{/",c,"}}"))}}var d=[];a[0]==="T"?b(a):c(a);return d.join("")}
function Ea(a){function b(a){if(typeof a==="object"){a.g=++z;for(var e=2,c=a.length;e<c;++e)b(a[e])}}function c(a){function b(a){function e(){}e.prototype=a;return new e}var c={},d;for(d in a)k.call(a,d)&&(c[d]=b(a[d]));return c}function d(a,b,d){if(--B<=0)throw Error("too much recursion");var j=a.g;if(j in d.f)return d.f[j];var o=c(d);o.f[j]=b;var s=l(a,b,o);if(s!==b&&(o.f[j]=s,o=c(d),b=l(a,b,o),b!==s))throw s=a.j,Error(s);var a=o,q;for(q in d)if(k.call(d,q)){var o=d[q],b=a[q],h;for(h in b)k.call(b,
h)&&(o[h]=b[h])}return s}function l(a,e,c){function l(a,e){if(typeof a==="string")return da(a,e);var f=2,h=a.length,i=e;switch(a[0]){case "html":return a[0]="$",a[1]="new SanitizedHtml("+a[1]+")",a.length=2,l(a,e);case "if":for(var g=e,n=h;--n>=2;){var m=a[n];if("else"===m[0]){""===m[1]&&(g=null);break}}for(;f<=h;++f)if(m=a[f],f===h||"else"===m[0]){if(g===null)g=e;else if(g=F(g,e),(g&31)===23)throw Error();e=i}else e=l(m,e);e=g;break;case "each":for(f=2;--f>=0;){h=e;a[0]="";try{g=l(a,e),e=F(h,g)}finally{a[0]=
"each"}if((e&31)===23)throw Error()}break;case "tmpl":if(f=p(a)){if(!/__C\d+$/.test(f)&&(h=f,f=e?h+"__C"+e:h,k.call(j,f)?f=j[f]:k.call(j,h)?(h=j[h],h=w(h),h.j=f,b(h),f=j[f]=h):f=void 0,f))c.m[a.g]=f.j,e=d(f,e,c)}else throw Error();break;case "wrap":break;case "$":e=G(e);f={};a:{h=f;i=G(e);g=C[i&31];switch(i&229376){case 32768:g=13;i=i&-229377|65536;break;case 98304:g=11;break;case 0:break;case 131072:case 65536:(i&1792)!==768&&(g=12);break;default:h=23;break a}if(g===void 0)h=23;else{n=null;m=i&
6144;if(m!==0)switch(g){case 0:break;case 2:m===6144&&(g=3);break;case 3:break;default:y[g]||(n=m===6144?3:2)}h.o=g;h.p=n;h=i}}if((h&31)===23)throw Error();i=/^\s*(?:\$\.encode|noAutoescape)\b/;if(!i.test(a[1])&&typeof f.o==="number"){i=[];i[0]=f.o;if(typeof f.p==="number")i[1]=f.p;c.n[a.g]=i}e=h;break;default:for(;f<h;++f)e=l(a[f],e)}return e}return l(a,e)}function p(a){return(a=a[1].match(/(?:^|\))\s*"#([^)\s]+)"\s*$/))&&a[1]}function t(a){var b=a[0];if(b==="tmpl"||b==="wrap")if((b=p(a))&&i(b))return 1
for(b=a.length;--b>=2;)if(t(a[b]))return 1;return 0}function i(a){if(k.call(u,a))return u[a];var b=j[a];if(b){for(var c=b.length;--c>=0;)if("noAutoescape"===b[c][0])return u[a]=0,u[a]=t(b);return u[a]=1}}function v(a){var b=a.g;switch(a[0]){case "noAutoescape":return x=0,"";case "$":if(x){var c=A.n[b];if(c){for(var d=a[1],b=0;b<c.length;++b)d="$.encode["+c[b]+"]("+d+")";a[1]=d}}break;case "tmpl":(b=A.m[b])&&(a[1]=a[1].replace(/\s*"#[^)\s]+"\s*$/,' "#'+b+'"'))}b=2;for(c=a.length;b<c;++b)d=a[b],typeof d!==
"string"&&(a[b]=v(d));return a}var k=Object.hasOwnProperty,j={},z=0,m;for(m in a)if(k.call(a,m)){var n=a[m];typeof n==="string"&&(n=Z(n));n.j=m;b(j[m]=n)}var w;w=typeof JSON!==void 0?function(a){return JSON.parse(JSON.stringify(a))}:function(a){for(var a=a.slice(),b=a.length;--b>=0;)typeof a[b]=="object"&&(a[b]=w(a[b]));return a};var A={n:{},m:{},f:{},z:{},y:{}},B=10,u={};for(m in j)k.call(j,m)&&i(m);for(m in u)1===u[m]&&d(j[m],0,A);var x;for(m in j)k.call(j,m)&&(x=1,v(j[m]));return j}
parseJqueryTemplate=Z;renderJqueryTemplate=Da;sanitizeTemplates=Ea;$.extend($.encode,Y)})()
