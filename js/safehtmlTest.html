<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html><head>
<title>Safe HTML Test</title>
<script>
if (/[?&]compiled/.test(location.search)) {
  document.write('<script src="safehtml-compiled.js"><\/script>');
} else {
  document.write(
     '<script src="contextUpdate.js"><\/script>' +
     '<script src="escapers.js"><\/script>' +
     '<script src="safehtml.js"><\/script>');
}
</script>

<script src="asserts.js"></script>
<script src="safehtmlTest.js"></script>

<style>
h2.pass { color: green; font-size: 100% }
h2.fail { color: red }
</style>
</head>

<body>
<h1>Safe HTML Test</h1>

<script>
(function () {

  var nTests = 0;
  for (var k in window) {
    if (!/^test/.test(k)) { continue; }
    ++nTests;
    var header = document.createElement('H2');
    header.appendChild(document.createTextNode(k));
    document.body.appendChild(header);
    if (typeof console !== 'undefined') { console.group(k); }
    try {
      window[k]();
      header.className = 'pass';
    } catch (e) {
      header.className = 'fail';
      document.body.appendChild(document.createTextNode(e.toString()));
    }
    if (typeof console !== 'undefined') { console.groupEnd(k); }
  }

  assertTrue(nTests > 0);
})();
</script>

</body></html>
